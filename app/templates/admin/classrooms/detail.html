{% extends "admin/base.html" %}

{% block title %}Chi tiáº¿t Lá»›p há»c{% endblock %}
{% block page_title %}ğŸ« Chi tiáº¿t Lá»›p há»c{% endblock %}

{% block content %}
<div class="form-container">
    <h3>{{ classroom.name }}</h3>
    
    <table style="width: 100%; margin-bottom: 20px;">
        <tr>
            <th>NÄƒm há»c:</th>
            <td>{{ classroom.school_year }}</td>
        </tr>
        <tr>
            <th>GiÃ¡o viÃªn chá»§ nhiá»‡m:</th>
            <td>{{ teacher.user.full_name if teacher else 'ChÆ°a phÃ¢n cÃ´ng' }}</td>
        </tr>
        <tr>
            <th>Sá»©c chá»©a:</th>
            <td>{{ classroom.current_student_count }}/{{ classroom.capacity }}
                {% if classroom.is_full %}
                    <span class="badge badge-danger">ÄÃ£ Ä‘áº§y</span>
                {% else %}
                    <span class="badge badge-success">CÃ²n {{ classroom.capacity - classroom.current_student_count }} chá»—</span>
                {% endif %}
            </td>
        </tr>
        <tr>
            <th>PhÃ²ng há»c:</th>
            <td>{{ classroom.room_number or '-' }}</td>
        </tr>
    </table>

    <div class="action-buttons" style="margin-bottom: 30px;">
        <a href="{{ url_for('admin.edit_classroom_form', classroom_id=classroom.id) }}" class="btn btn-warning">âœï¸ Sá»­a thÃ´ng tin</a>
        {% if classroom.current_student_count == 0 %}
        <form method="POST" action="{{ url_for('admin.delete_classroom', classroom_id=classroom.id) }}" style="display: inline;" id="deleteForm">
            <button type="button" onclick="confirmDelete('deleteForm', 'Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a lá»›p há»c nÃ y?')" class="btn btn-danger">ğŸ—‘ï¸ XÃ³a lá»›p</button>
        </form>
        {% endif %}
        <a href="{{ url_for('admin.list_classrooms') }}" class="btn btn-secondary">â† Quay láº¡i</a>
    </div>

    <h4>Danh sÃ¡ch há»c sinh ({{ students|length }})</h4>
    {% if students %}
    <table>
        <thead>
            <tr>
                <th>Há» tÃªn</th>
                <th>NgÃ y sinh</th>
                <th>Giá»›i tÃ­nh</th>
                <th>Phá»¥ huynh</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
            <tr>
                <td>{{ student.full_name }}</td>
                <td>{{ student.date_of_birth.strftime('%d/%m/%Y') }}</td>
                <td>{{ student.gender }}</td>
                <td>{{ student.parent.user.full_name if student.parent else '-' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty-state">
        <div class="empty-state-icon">ğŸ‘¶</div>
        <div class="empty-state-message">ChÆ°a cÃ³ há»c sinh nÃ o trong lá»›p</div>
    </div>
    {% endif %}
</div>
{% endblock %}
