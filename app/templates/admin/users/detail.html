{% extends "admin/base.html" %}

{% block title %}Chi tiáº¿t User{% endblock %}
{% block page_title %}ğŸ‘¤ Chi tiáº¿t User{% endblock %}

{% block content %}
<div class="form-container">
    <h3>{{ target_user.full_name }}</h3>
    
    <table style="width: 100%; margin-bottom: 20px;">
        <tr>
            <th>Email:</th>
            <td>{{ target_user.email }}</td>
        </tr>
        <tr>
            <th>Vai trÃ²:</th>
            <td>
                {% if target_user.role.value == 'teacher' %}
                    <span class="badge badge-info">GiÃ¡o viÃªn</span>
                {% elif target_user.role.value == 'parent' %}
                    <span class="badge badge-success">Phá»¥ huynh</span>
                {% elif target_user.role.value == 'admin' %}
                    <span class="badge badge-danger">Admin</span>
                {% endif %}
            </td>
        </tr>
        <tr>
            <th>Äiá»‡n thoáº¡i:</th>
            <td>{{ target_user.phone or '-' }}</td>
        </tr>
        <tr>
            <th>Tráº¡ng thÃ¡i:</th>
            <td>
                {% if target_user.is_active %}
                    <span class="badge badge-success">âœ… Hoáº¡t Ä‘á»™ng</span>
                {% else %}
                    <span class="badge badge-danger">âŒ KhÃ´ng hoáº¡t Ä‘á»™ng</span>
                {% endif %}
            </td>
        </tr>
        <tr>
            <th>NgÃ y táº¡o:</th>
            <td>{{ target_user.created_at.strftime('%d/%m/%Y %H:%M') if target_user.created_at else '-' }}</td>
        </tr>
    </table>

    {% if profile %}
    <h4>ThÃ´ng tin chi tiáº¿t</h4>
    <table style="width: 100%; margin-bottom: 20px;">
        {% if target_user.role.value == 'teacher' %}
        <tr>
            <th>MÃ£ nhÃ¢n viÃªn:</th>
            <td>{{ profile.employee_id or '-' }}</td>
        </tr>
        <tr>
            <th>TrÃ¬nh Ä‘á»™:</th>
            <td>{{ profile.qualification or '-' }}</td>
        </tr>
        <tr>
            <th>ChuyÃªn mÃ´n:</th>
            <td>{{ profile.specialization or '-' }}</td>
        </tr>
        <tr>
            <th>Sá»‘ lá»›p Ä‘ang dáº¡y:</th>
            <td>{{ stats.get('classrooms', 0) }}</td>
        </tr>
        {% elif target_user.role.value == 'parent' %}
        <tr>
            <th>Äá»‹a chá»‰:</th>
            <td>{{ profile.address or '-' }}</td>
        </tr>
        <tr>
            <th>SÄT kháº©n cáº¥p:</th>
            <td>{{ profile.emergency_contact or '-' }}</td>
        </tr>
        <tr>
            <th>Quan há»‡:</th>
            <td>{{ profile.relationship or '-' }}</td>
        </tr>
        <tr>
            <th>Nghá» nghiá»‡p:</th>
            <td>{{ profile.occupation or '-' }}</td>
        </tr>
        <tr>
            <th>Sá»‘ con:</th>
            <td>{{ stats.get('students', 0) }}</td>
        </tr>
        {% endif %}
    </table>
    {% endif %}

    <!-- Action Buttons -->
    <div class="action-buttons">
        {% if target_user.role.value == 'teacher' and not target_user.is_active %}
        <button onclick="approveTeacher({{ target_user.id }}, this)" class="btn btn-success">
            âœ… Duyá»‡t giÃ¡o viÃªn
        </button>
        {% endif %}
        
        {% if target_user.role.value != 'admin' %}
        <button onclick="toggleUserStatus({{ target_user.id }}, this)" 
                data-status="{{ target_user.is_active|lower }}"
                class="btn {% if target_user.is_active %}btn-warning{% else %}btn-success{% endif %}">
            {% if target_user.is_active %}
                ğŸ”’ VÃ´ hiá»‡u hÃ³a
            {% else %}
                ğŸ”“ KÃ­ch hoáº¡t
            {% endif %}
        </button>
        {% endif %}
        
        <a href="{{ url_for('admin.list_users') }}" class="btn btn-secondary">â† Quay láº¡i</a>
    </div>
</div>
{% endblock %}
