{% extends "admin/base.html" %}

{% block title %}Ghi nh·∫≠n thanh to√°n{% endblock %}
{% block page_title %}üíµ Ghi nh·∫≠n thanh to√°n{% endblock %}

{% block content %}
<div class="form-container">
    <h3>H·ªçc ph√≠ th√°ng {{ fee.month }}/{{ fee.year }}</h3>
    <h4>H·ªçc sinh: {{ student.full_name }}</h4>
    
    <div class="alert alert-info">
        <strong>T·ªïng ph√≠:</strong> {{ "{:,.0f}".format(fee.total_fee) }}ƒë<br>
        <strong>ƒê√£ thanh to√°n:</strong> {{ "{:,.0f}".format(fee.paid_amount) }}ƒë<br>
        <strong>C√≤n l·∫°i:</strong> <span style="color: red; font-weight: bold;">{{ "{:,.0f}".format(remaining) }}ƒë</span>
    </div>

    <form method="POST" action="{{ url_for('admin.record_payment', fee_id=fee.id) }}">
        <div class="form-group">
            <label for="amount">S·ªë ti·ªÅn thanh to√°n (VND) <span style="color: red;">*</span></label>
            <input type="number" class="form-control" id="amount" name="amount" 
                   value="{{ remaining }}" min="1" max="{{ remaining }}" required>
            <small>S·ªë ti·ªÅn t·ªëi ƒëa: {{ "{:,.0f}".format(remaining) }}ƒë</small>
        </div>

        <div class="form-group">
            <label for="method">Ph∆∞∆°ng th·ª©c thanh to√°n <span style="color: red;">*</span></label>
            <select class="form-control" id="method" name="method" required>
                <option value="cash">Ti·ªÅn m·∫∑t</option>
                <option value="bank_transfer">Chuy·ªÉn kho·∫£n ng√¢n h√†ng</option>
                <option value="card">Th·∫ª</option>
                <option value="momo">MoMo</option>
                <option value="zalopay">ZaloPay</option>
            </select>
        </div>

        <div class="form-group">
            <label for="reference_number">M√£ giao d·ªãch</label>
            <input type="text" class="form-control" id="reference_number" name="reference_number" 
                   placeholder="VD: REF123456 (n·∫øu chuy·ªÉn kho·∫£n)">
        </div>

        <div class="form-group">
            <label for="note">Ghi ch√∫</label>
            <textarea class="form-control" id="note" name="note" 
                      placeholder="Th√¥ng tin b·ªï sung v·ªÅ thanh to√°n"></textarea>
        </div>

        <div class="form-group">
            <button type="submit" class="btn btn-success">‚úÖ X√°c nh·∫≠n thanh to√°n</button>
            <a href="{{ url_for('admin.fee_detail', fee_id=fee.id) }}" class="btn btn-secondary">H·ªßy</a>
        </div>
    </form>
</div>
{% endblock %}
