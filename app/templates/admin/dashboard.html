{% extends "admin/base.html" %}

{% block title %}Dashboard{% endblock %}
{% block page_title %}ğŸ“Š Dashboard{% endblock %}

{% block content %}
<!-- Metrics Grid -->
<div class="metrics-grid">
    <div class="metric-card">
        <div class="metric-icon">ğŸ‘¶</div>
        <div class="metric-value">{{ stats.total_students }}</div>
        <div class="metric-label">Tá»•ng sá»‘ há»c sinh</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-icon">ğŸ‘¨â€ğŸ«</div>
        <div class="metric-value">{{ stats.total_teachers }}</div>
        <div class="metric-label">Tá»•ng sá»‘ giÃ¡o viÃªn</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§</div>
        <div class="metric-value">{{ stats.total_parents }}</div>
        <div class="metric-label">Tá»•ng sá»‘ phá»¥ huynh</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-icon">ğŸ’°</div>
        <div class="metric-value">{{ "{:,.0f}".format(stats.revenue_this_month) }}Ä‘</div>
        <div class="metric-label">Doanh thu thÃ¡ng nÃ y</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-icon">â³</div>
        <div class="metric-value">{{ stats.pending_fees }}</div>
        <div class="metric-label">Há»c phÃ­ chá» thanh toÃ¡n</div>
    </div>
    
    <div class="metric-card">
        <div class="metric-icon">âš ï¸</div>
        <div class="metric-value">{{ stats.overdue_fees }}</div>
        <div class="metric-label">Há»c phÃ­ quÃ¡ háº¡n</div>
    </div>
</div>

<!-- Quick Actions -->
<div class="table-container" style="margin-top: 30px;">
    <h3>ğŸ¯ HÃ nh Ä‘á»™ng nhanh</h3>
    <div class="action-buttons" style="padding: 20px;">
        <a href="{{ url_for('admin.list_users') }}" class="btn btn-primary">ğŸ‘¥ Quáº£n lÃ½ Users</a>
        <a href="{{ url_for('admin.list_classrooms') }}" class="btn btn-primary">ğŸ« Quáº£n lÃ½ Lá»›p há»c</a>
        <a href="{{ url_for('admin.list_fees') }}" class="btn btn-primary">ğŸ’° Quáº£n lÃ½ Há»c phÃ­</a>
        <a href="{{ url_for('admin.report_dashboard') }}" class="btn btn-primary">ğŸ“Š Xem bÃ¡o cÃ¡o</a>
        <a href="{{ url_for('admin.settings_page') }}" class="btn btn-secondary">âš™ï¸ Cáº¥u hÃ¬nh</a>
    </div>
</div>

<!-- Recent Overdue Fees -->
{% if recent_fees %}
<div class="table-container" style="margin-top: 20px;">
    <h3>âš ï¸ Há»c phÃ­ quÃ¡ háº¡n gáº§n Ä‘Ã¢y</h3>
    <table>
        <thead>
            <tr>
                <th>Há»c sinh</th>
                <th>ThÃ¡ng/NÄƒm</th>
                <th>Sá»‘ tiá»n cÃ²n láº¡i</th>
                <th>Háº¡n thanh toÃ¡n</th>
                <th>Thao tÃ¡c</th>
            </tr>
        </thead>
        <tbody>
            {% for fee in recent_fees %}
            <tr>
                <td>{{ fee.student.full_name }}</td>
                <td>{{ fee.month }}/{{ fee.year }}</td>
                <td style="color: red; font-weight: bold;">{{ "{:,.0f}".format(fee.remaining_amount) }}Ä‘</td>
                <td>{{ fee.due_date.strftime('%d/%m/%Y') if fee.due_date else '-' }}</td>
                <td>
                    <a href="{{ url_for('admin.fee_detail', fee_id=fee.id) }}" class="btn btn-sm btn-primary">Chi tiáº¿t</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}
{% endblock %}