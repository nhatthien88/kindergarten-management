<!-- app/templates/auth/register.html -->
{% extends "base.html" %}

{% block title %}ÄÄƒng kÃ½ - Kindergarten Management{% endblock %}

{% block content %}
<div class="container">
    <div class="auth-box">
        <h1>ğŸ« Kindergarten Management</h1>
        <h2>ÄÄƒng kÃ½ tÃ i khoáº£n</h2>

        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <div style="margin-bottom: 20px;">
            {% for category, message in messages %}
            <div class="alert alert-{{ category }}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}

        <form action="{{ url_for('auth.register_submit') }}" method="POST">
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" required placeholder="your@email.com">
            </div>

            <div class="form-group">
                <label for="password">Máº­t kháº©u</label>
                <input type="password" id="password" name="password" required placeholder="Tá»‘i thiá»ƒu 6 kÃ½ tá»±"
                    minlength="6">
            </div>

            <div class="form-group">
                <label for="full_name">Há» vÃ  tÃªn</label>
                <input type="text" id="full_name" name="full_name" required placeholder="Nguyá»…n VÄƒn A">
            </div>

            <div class="form-group">
                <label for="phone">Sá»‘ Ä‘iá»‡n thoáº¡i</label>
                <input type="tel" id="phone" name="phone" placeholder="0123456789">
            </div>

            <div class="form-group">
                <label for="role">Vai trÃ²</label>
                <select id="role" name="role" required onchange="toggleRoleFields()">
                    <option value="">-- Chá»n vai trÃ² --</option>
                    <option value="parent">Phá»¥ huynh</option>
                    <option value="teacher">GiÃ¡o viÃªn</option>
                </select>
            </div>

            <!-- Parent Fields -->
            <div id="parentFields" style="display: none;">
                <div class="form-group">
                    <label for="address">Äá»‹a chá»‰</label>
                    <input type="text" id="address" name="address" placeholder="123 ÄÆ°á»ng ABC, HÃ  Ná»™i">
                </div>

                <div class="form-group">
                    <label for="relationship">Quan há»‡</label>
                    <select id="relationship" name="relationship">
                        <option value="Bá»‘">Bá»‘</option>
                        <option value="Máº¹">Máº¹</option>
                        <option value="Ã”ng">Ã”ng</option>
                        <option value="BÃ ">BÃ </option>
                        <option value="KhÃ¡c">KhÃ¡c</option>
                    </select>
                </div>
            </div>

            <!-- Teacher Fields -->
            <div id="teacherFields" style="display: none;">
                <div class="form-group">
                    <label for="employee_id">MÃ£ giÃ¡o viÃªn</label>
                    <input type="text" id="employee_id" name="employee_id" placeholder="GV001">
                </div>

                <div class="form-group">
                    <label for="qualification">TrÃ¬nh Ä‘á»™</label>
                    <input type="text" id="qualification" name="qualification" placeholder="Cá»­ nhÃ¢n sÆ° pháº¡m">
                </div>
            </div>

            <button type="submit" class="btn btn-primary">ÄÄƒng kÃ½</button>
        </form>

        <p class="switch-auth">
            ÄÃ£ cÃ³ tÃ i khoáº£n? <a href="{{ url_for('auth.login_page') }}">ÄÄƒng nháº­p</a>
        </p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    function toggleRoleFields() {
        const role = document.getElementById('role').value;
        const parentFields = document.getElementById('parentFields');
        const teacherFields = document.getElementById('teacherFields');

        if (role === 'parent') {
            parentFields.style.display = 'block';
            teacherFields.style.display = 'none';
        } else if (role === 'teacher') {
            parentFields.style.display = 'none';
            teacherFields.style.display = 'block';
        } else {
            parentFields.style.display = 'none';
            teacherFields.style.display = 'none';
        }
    }
</script>
{% endblock %}